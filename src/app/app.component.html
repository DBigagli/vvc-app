<div id="vvc-container">

  <vvc-queue id="vvc-queue"
             *ngIf="widgetState?.loading"
             [type]="type"></vvc-queue>

  <div id="vvc-widget-wrap"
       *ngIf="!widgetState?.loading && !widgetState?.dataCollectionPanel">

    <vvc-topbar id="vvc-top-bar"
                [ngClass]="{'expanded':widgetState?.topBarExpanded}"
                [state]="widgetState"
                (close)="showCloseModal()"></vvc-topbar>

    <div id="vvc-messages" angular2-auto-scroll>
      <div *ngFor="let m of messages" [ngSwitch]="m.type">
        <vvc-chat-message *ngSwitchCase="'chat'" [message]="m"></vvc-chat-message>
        <vvc-incoming-message *ngSwitchCase="'incoming-request'"
                              [message]="m"
                              (rejectOffer)="denyIncomingRequest()"
                              (acceptOffer)="acceptIncomingRequest()"></vvc-incoming-message>
      </div>
    </div>

    <vvc-chat-box id="vvc-chat-area"
                  (upload)="sendAttachment($event)"
                  (message)="sendChatMessage($event)"></vvc-chat-box>

  </div>

</div>