<!--
<script id="materialize" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
-->
<div id="vvcMenu" class="vvc-widget opacity fixed-action-btn vvc-widget-__ENGAGEMENT_ID__">
  <a class="btn-floating btn-large vvc-color">
    <i class="large material-icons">mode_edit</i>
  </a>
  <ul>
    <li title="sync" class="vvc-media-sync vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('sync')"><i class="material-icons">phonelink</i></a></li>
    <li title="inbound" class="vvc-media-inbound vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('inbound')"><i class="material-icons">phonelink_ring</i></a></li>
    <li title="cbn" class="vvc-media-cbn vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('cbn')"><i class="material-icons">phone_in_talk</i></a></li>
    <li title="weblead" class="vvc-media-weblead vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('weblead')"><i class="material-icons">mail</i></a></li>
    <li title="video" class="vvc-media-video vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('video')"><i class="material-icons">video_call</i></a></li>
    <li title="voice" class="vvc-media-voice vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('voice')"><i class="material-icons">phone</i></a></li>
    <li title="chat" class="vvc-media-chat vvc-media-item"><a class="btn-floating vvc-color" onclick="vvcEngage('chat')"><i class="material-icons">chat</i></a></li>
  </ul>
</div>

<script>
  var vvcMenu = document.getElementById('vvcMenu');
  var vvcMenuTimeout;
  vvcMenu.addEventListener('mouseover', function(){
    vvcMenu.classList.add('active');
    revealOptions();
  });
  vvcMenu.addEventListener('mouseleave', function(){
    clearTimeout(vvcMenuTimeout);
    vvcMenu.classList.remove('active');
    vvcMenu.querySelectorAll('li').forEach(function(li){
      li.classList.remove('active');
    });
  })
  function vvcEngage(preset){
    __WIDGET__.engage(preset);
  }
  function revealOptions(){
    var listNodes = vvcMenu.querySelectorAll('li');
    var liList = Array.prototype.slice.call(listNodes, 0);
    liList.reverse();
    var animate = function(idx){
      if (liList[idx]) {
        vvcMenuTimeout = setTimeout( function() {
          liList[idx].classList.add('active');
          animate(idx+1);
        }, 100);
      }
    };
    animate(0);
  }
</script>

